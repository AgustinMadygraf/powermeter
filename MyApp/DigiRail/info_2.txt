
6. PROTOCOLO MODBUS
DigiRail Connect es compatible con el protocolo Modbus, un protocolo de comunicación de datos utilizado para conectar el dispositivo a sistemas de adquisición, supervisión y control de datos (SCADA). Soporta hasta 5 conexiones simultáneas.

6.1 COMANDOS
6.1.1 READ COILS – 0x01
Este comando puede utilizarse para leer valores binarios de uno o hasta un máximo de registros consecutivos accesibles como bit.
Se puede utilizar este comando para acceder a los registros 70 (HR_INPUT1_STATE) a 85 (HR_OUTPUT8_STATE) y a los registros 500 (HR_DO1_VALUE) a 523 (HR_DO8_FORCE_STATE).

6.1.2 READ DISCRETE INPUTS – 0x02
Este comando puede utilizarse para leer valores binarios de uno o hasta un máximo de registros consecutivos accesibles como bit.
Se puede utilizar este comando para acceder a los registros 70 (HR_INPUT1_STATE) a 85 (HR_OUTPUT8_STATE) y a los registros 500 (HR_DO1_VALUE) a 523 (HR_DO8_FORCE_STATE).

6.1.3 READ HOLDING REGISTERS – 0x03
Este comando puede utilizarse para leer valores de uno o hasta un máximo de registros consecutivos accesibles como 16 bits.

6.1.4 READ INPUT REGISTERS – 0x04
Este comando puede utilizarse para leer valores de uno o hasta un máximo de registros consecutivos accesibles como 16 bits.

6.1.5 WRITE SINGLE COIL – 0x05
Este comando puede utilizarse para escribir el valor binario de un registro accesible como un bit. Según lo previsto en el protocolo Modbus, el envío del valor 0xFF00 pone el registro de coil en nivel alto; la escritura de 0x0000, a su vez, lo pone en nivel bajo.
Se puede utilizar este comando para acceder a los registros 70 (HR_INPUT1_STATE) a 85 (HR_OUTPUT8_STATE) y a los registros 500 (HR_DO1_VALUE) a 523 (HR_DO8_FORCE_STATE).

6.1.6 WRITE SINGLE HOLDING REGISTER – 0x06
Este comando puede utilizarse para escribir en un registro accesible como 16 bits

6.1.7 WRITE MULTIPLE HOLDING REGISTERS – 0x10
Este comando puede utilizarse para escribir en múltiples registros accesibles como 16 bits

6.1.8 MASK WRITE REGISTER – 0x16
Este comando puede utilizarse para escribir cuando se utiliza una máscara de bits AND y OR en un registro accesible como 16 bits.

6.2 TABLA DE REGISTROS
Sigue a continuación la tabla de registros soportados por el dispositivo:
* La columna R/W indica si el parámetro es de escritura y lectura (R/W) o sólo de lectura (R).
** Todos los registros de 32 bits, que consisten en dos registros de 16 bits (LO, HI), muestran la información en INT32.

7. SOFTWARE DE CONFIGURACIÓN
7.1 NXPERIENCE
El software NXperience permite configurar y analizar los datos de DigiRail Connect. Con él, se pueden explorar todas las características del dispositivo, comunicándose a través de su interfaz USB.
Además, el NXperience permite forzar valores en las entradas y salidas analógicas y digitales y realizar el análisis de información sobre la interfaz
Ethernet y el estado del dispositivo.
NXperience es la más completa herramienta de configuración para la nueva línea de dispositivos de NOVUS. Se puede realizar gratuitamente la
descarga del software en nuestro sitio web www.novusautomation.com, en el Área de Descargas.
7.2 CONFIGURANDO DIGIRAIL CONNECT CON NXPERIENCE
Se puede configurar DigiRail Connect al hacer clic en el botón Configurar, ubicado en la pantalla inicial de NXperience. En las secciones a
continuación se describen cada uno de los parámetros posibles de configuració

7.2.1 INFORMACIÓN GENERAL DEL DISPOSITIVO
• Nombre del Dispositivo: Permite configurar un nombre, que se utilizará como un identificador, para el dispositivo. El campo permite hasta 24
caracteres.
• Modelo: Muestra el modelo del dispositivo.
• Número de Serie: Muestra el número único de identificación del dispositivo.
• Versión de Firmware: Muestra la versión de firmware grabada en el dispositivo.

7.2.2 ENTRADAS ANALÓGICAS
• Tag: Permite configurar un nombre, que se utilizará como un identificador, para la entrada analógica. El campo permite hasta 24 caracteres.
• Tipo de Señal: Permite configurar el tipo de sensor a utilizarse en cada entrada analógica.
• Unidad: Permite configurar la unidad de cada entrada analógica. En caso de sensores de temperatura, se pueden seleccionar las unidades
°C o °F.
• Valor Inferior del Rango: Con las señales lineales, permite definir un valor inferior para el rango -65.535 a 65.535.
• Valor Superior del Rango: Con las señales lineales, permite definir un valor superior para el rango -65.535 a 65.535.
• Tasa de Muestreo: Permite configurar una tasa de muestreo de 1 por segundo (lo que concede más estabilidad al proceso) o de 10 por
segundo (lo que concede menos estabilidad al proceso).
• Filtro: Permite definir un filtro para la entrada analógica seleccionada.
• Valor en Caso de Error: Permite definir un valor que se presentará cuando haya un error en la entrada configurada.

7.2.3 ENTRADAS DIGITALES
 Tag: Permite configurar un nombre, que se utilizará como un identificador, para la entrada digital. El campo permite hasta 24 caracteres.
• Función: Permite seleccionar la función a realizarse por la entrada digital.
o Estado Lógico: Permite leer el estado lógico de la señal aplicada a la entrada digital.
 Nivel Lógico Alto (1): Tensiones mayores que 2,2 V;
 Nivel Lógico Bajo (0): Tensiones menores que 1,5 V.
o Contador de Borde Ascendente: Permite hacer el conteo del número de pulsos recibidos en el borde ascendente. Hasta 250 Hz.
o Contador de Borde Descendente: Permite hacer el conteo del número de pulsos recibidos en el borde descendente. Hasta 250 Hz.
o Integrador ON/OFF: Permite integrar en un registro los intervalos de tiempo de la entrada digital apagada y, en otro registro, los intervalos de tiempo de la entrada digital encendida. Valor contabilizado en segundos.
• Tipo de Señal: Permite configurar el tipo de sensor a utilizarse.
• Debounce: Permite definir un tiempo a desconsiderarse por el contador después de la detección del borde en la entrada. Funcionalidad
disponible al seleccionar el tipo de sensor Contacto Seco. Intervalo limitado a 10 s (10 000 ms) máximos.
• Preset: Permite definir un valor inicial para los contadores de borde ascendente, borde descendente y para el integrador ON/OFF.

7.2.4 SALIDAS ANALÓGICAS
• Tag: Permite configurar un nombre, que se utilizará como un identificador, para la salida analógica. El campo permite hasta 24 caracteres.
• Tipo: Permite configurar el tipo de señal de la salida analógica.
• Rango de Operación: Permite definir la escala utilizada por la salida analógica, que puede ser de 0 hasta 100 % o de 0 hasta 32.000 recuentos.
• Condición Inicial: Permite definir el estado inicial de la salida analógica del dispositivo después de su inicialización y hasta el reconocimiento
de un comando.
o Deshabilitado: Permite determinar que la salida analógica permanezca apagada después de la inicialización del dispositivo.
o Valor Configurado: Permite definir, en el parámetro Valor Inicial, el valor a adoptarse por la salida analógica después de la inicialización
del dispositivo.
 Valor Inicial: Permite definir el valor a adoptarse por la salida analógica después de la inicialización del dispositivo. Este parámetro
está relacionado al rango de operación elegido, pudiendo ser cualquier valor dentro del rango de 0 a 100 % o de 0 a 32000 recuentos.
o Último Valor Válido: Permite determinar que, después de inicializar el dispositivo, la salida analógica adopte el último valor válido aplicado de los respectivos registros de manipulación de valores fornecidos por la (HR_AO"x"_VALUE).
• Valor de Estado Seguro (Watchdog): Permite definir el valor a adoptarse por la salida analógica en caso de pérdida de comunicación Ethernet y/o RS485

7.2.5 SALIDAS DIGITALES
• Tag: Permite configurar un nombre, que se utilizará como un identificador, para la salida digital. El campo permite hasta 24 caracteres.
• Modo de Acción: Permite definir el modo de acción de la salida digital.
o Estado Lógico: Cuando se selecciona, permite aplicar el valor 0 o 1 a la salida digital configurada.
o Pulso: Cuando se selecciona, permite que la salida digital se encienda por un tiempo definido (definido en el parámetro Duración del
Pulso) y que, después de ese período, vuelva a la condición de apagado.
 Duración del Pulso: Permite definir el período de duración del pulso y por cuánto tiempo la salida digital permanecerá encendida.
o Secuencia de Pulsos: Cuando se selecciona, permite que la salida digital genere una secuencia definida de pulsos.
 Duración del Pulso: Permite definir el período de duración del pulso y por cuánto tiempo la salida digital permanecerá encendida.
 Período de Repetición: Permite definir el período de repetición de la secuencia de pulsos, que consiste en el intervalo entre los pulsos.
 Número de Pulsos: Permite definir el número de pulsos a aplicarse en el intervalo configurado.
• Estado Inicial: Permite definir el estado inicial de la salida analógica después de la inicialización del dispositivo y hasta que haya el reconocimiento de un comando.
o Desactivado: Permite que la salida digital permanezca apagada (0) después de iniciar el dispositivo.
o Activado: Permite el inicio de la salida digital (1) después de la inicialización del dispositivo.
o Último Estado Válido: Permite que la salida digital adopte el último estado válido registrado.
• Valor de Estado Seguro (Watchdog): Permite definir la condición a adoptarse por la salida digital cuando se interrumpe la recepción de un
comando debido a una falla de comunicación.
o Desactivado: Permite que la salida digital permanezca apagada hasta que se restablezca la comunicación.
o Activado: Permite que la salida digital permanezca encendida hasta que se restablezca la comunicación

7.2.6 PARÁMETROS DE COMUNICACIÓN
7.2.6.1 ETHERNET
INTERFAZ INTERNET
• Interfaz Ethernet: Permite habilitar o deshabilitar la interfaz Ethernet.
• Dirección Actual: Permite definir el modo por el que DigiRail Connect obtendrá un IP: DHCP (Dynamic Host Configuration Protocol), protocolo que permite que el IP (Internet Protocol) del dispositivo sea asignado por el servidor de la red, o Estático, que permite que el usuario establezca la dirección IP, la máscara de subred y el Gateway para la conexión.
• Dirección IP: Permite insertar el IP, que se refiere a la identificación del dispositivo en una red local o pública, a ser utilizado por el dispositivo.
Es un campo obligatorio cuando el parámetro Dirección Actual está seleccionado como Estático.
• Máscara de Subred: También conocida como subnet mask o netmask, permite dividir una red específica en subredes más pequeñas, haciendo más efectivo el uso de determinado espacio de dirección IP. Es un campo obligatorio cuando el parámetro Dirección Actual está seleccionado como Estático.
• Gateway por Defecto: Permite insertar un puerto de enlace predeterminado, que se refiere a la dirección del dispositivo en la red que conecta
sus computadores a Internet, al dispositivo. Es un campo obligatorio cuando el parámetro Dirección Actual está seleccionado como Estático.
MODBUS TCP
• Puerto: Permite definir el puerto TCP en el que el servicio estará disponible.
• Dirección: Permite definir la dirección Modbus a adoptarse por el dispositivo, a fin de que pueda comunicarse en una red Modbus.
• Timeout del Gateway: Permite establecer el tiempo de espera (en milisegundos) del Gateway. Es un campo obligatorio cuando el parámetro
Modo de Operación Modbus de la guía RS485 (ver sección RS485) está seleccionado como Gateway.

7.2.6.2 RS485
• Modo de Operación Modbus: Permite definir el modo de operación Modbus de la interfaz RS485: Esclavo o Gateway.
• Dirección Modbus: Permite definir la dirección Modbus a ser utilizada por el dispositivo, a fin de que pueda comunicarse en una red Modbus.
Es un campo editable cuando el parámetro Modo de Operación Modbus está seleccionado como Esclavo. Permite dirección entre 1 y 247.
• Baud Rate: Permite definir el Baud Rate a ser utilizado por la red Modbus.
• Paridad: Permite definir la paridad a ser utilizada por la red Modbus: par, impar o ninguna.
• Stop Bits: Permite definir el número de Stop Bits a ser utilizado por la red Modbus.
OPERACIÓN EN MODO GATEWAY
Se puede configurar el DigiRail Connect para operar en modo Gateway entre una red Modbus TCP y una red Modbus RTU. DigiRail Connect
permitirá a un cliente Modbus TCP en la red Modbus TCP (un PLC o un sistema de supervisión SCADA vía Ethernet, por ejemplo) comunicarse
con equipos de una red Modbus RTU en RS485.
Junto con la configuración de la interfaz Ethernet también hay la configuración de Modbus TCP donde, además del puerto, se configura la dirección RTU del DigiRail Connect y, si está habilitada, también el Timeout del Gateway Modbus TCP/RTU. Todas las peticiones Modbus TCP recibidas en el DigiRail Connect con una dirección Modbus RTU diferente a la configurada en él se convertirán al protocolo Modbus RTU y se retransmitirán a la red RS485. Las respuestas a estas peticiones se reconvertirán al protocolo Modbus TCP y se retransmitirán a través de la red Ethernet
al cliente Modbus TCP que ha realizado la solicitación.
El modo Gateway se limita a adaptar el protocolo al entorno físico y es transparente desde el punto de vista del cliente Modbus TCP.

7.2.6.3 WATCHDOG DE ESTADO SEGURO
• Watchdog: Permite habilitar o deshabilitar la función Watchdog.
• Timeout: Permite insertar un período de tiempo (en ms) para que se active la función Watchdog. Si hay pérdida de comunicación y, una vez
transcurrido el tiempo de Timeout configurado en este parámetro, la salida analógica o digital recibirá el valor previamente configurado en el
parámetro Watchdog de Estado Seguro. Se puede configurar este parámetro con un valor mínimo de 10 ms y un valor máximo de 65535
ms.
• RS485: Si se selecciona, permite que la función Watchdog actúe sobre la interfaz RS485.
• Ethernet: Si se selecciona, permite que la función Watchdog actúe sobre la interfaz Ethernet

7.3 DIAGNÓSTICOS
Se puede visualizar la pantalla de diagnósticos de DigiRail Connect al hacer clic en el botón Diagnósticos, ubicado en la pantalla inicial de
NXperience. Además de proporcionar un análisis del estado de comunicación del dispositivo, esta pantalla también le permite forzar valores
específicos para cada canal.
En las secciones a continuación se describen cada uno de los parámetros configurables y sus particularidades.

7.3.1 FORZAR ENTRADAS DIGITALES
 Tag del Canal: Muestra el identificador del canal, definido en el parámetro Tag de cada entrada digital.
• Estado: Muestra el valor actual del canal.
• Función: Muestra la función configurada para cada canal, definida en el parámetro Función de cada entrada digital.
o Pausar: Disponible para las funciones Contador e Integrador. Permite congelar el valor del contador/integrador. Se utiliza este botón para congelar y para retomar el contador/integrador.
• Preset: Permite, al hacer clic en el botón , aplicar al canal el valor previamente configurado en el parámetro Preset de la entrada digital.
• Valor de Forzamiento: Permite forzar un valor específico para cada canal al insertar el valor deseado y hacer clic en el botón . Al
ejecutar esta función, el parámetro Estado adoptará el valor de forzamiento configurado. Para detener el forzamiento, basta con hacer clic en
el botón .
• Actualizar Forzamiento: Permite actualizar los valores de forzamiento aplicados a los canales que ya están forzados al hacer clic en su
botón.

7.3.2 FORZAR ENTRADAS ANALÓGICAS
• Tag del Canal: Muestra el identificador del canal, definido en el parámetro Tag de cada entrada analógica.
• Estado: Muestra el valor actual presentado por el canal.
• Unidad: Muestra la unidad configurada para cada entrada analógica, definida en el parámetro Unidad de cada entrada analógica.
• Status: Muestra el estado de cada entrada analógica. OK significa que no existe ningún error en la entrada analógica. NOK significa que no
existe ningún error en la entrada analógica.
• Valor de Forzamiento: Permite forzar un valor específico para cada canal al insertar el valor deseado y hacer clic en el botón . Al
ejecutar esta función, el parámetro Estado adoptará el valor de forzamiento configurado. Para detener el forzamiento, basta con hacer clic en
el botón .
• Actualizar Forzamiento: Permite actualizar los valores de forzamiento aplicados a los canales que ya están forzados al hacer clic en su
botón.

7.3.3 FORZAR SALIDAS DIGITALES
• Tag del Canal: Muestra el identificador del canal, definido en el parámetro Tag de cada salida digital.
• Estado: Muestra el valor actual presentado por el canal.
• Función: Muestra la función configurada para cada canal, definida en el parámetro Modo de Acción de cada salida digital.
• Valor Forzado: Permite forzar un valor específico para cada canal al insertar el valor deseado y hacer clic en el botón . Al ejecutar
esta función, el parámetro Estado adoptará el valor de forzamiento configurado. Para detener el forzamiento, basta con hacer clic en el botón
.
• Actualizar Forzamiento: Permite actualizar los valores de forzamiento aplicados a los canales que ya están forzados al hacer clic en su
botón.

7.3.4 FORZAR SALIDAS ANALÓGICAS
• Tag del Canal: Muestra el identificador del canal, definido en el parámetro Tag de cada salida analógica.
• Estado: Muestra el valor actual presentado por el canal.
• Tipo: Muestra el tipo de señal de salida configurado para cada canal: 0-20 mA, 4-20 mA o 0-10 V.
• Valor Forzado: Permite forzar un valor específico para cada canal al insertar el valor deseado y hacer clic en el botón . Al ejecutar
esta función, el parámetro Estado adoptará el valor de forzamiento configurado. Para detener el forzamiento, basta con hacer clic en el botón
.
• Actualizar Forzamiento: Permite actualizar los valores de forzamiento aplicados a los canales que ya están forzados al hacer clic en su
botón.

7.3.5 COMUNICACIÓN

7.3.5.1 ETHERNET
• Status: Muestra si la interfaz Ethernet está habilitada.
• Dirección IP: Muestra la dirección IP del dispositivo.
• Dirección MAC: Muestra la dirección MAC del dispositivo.

7.3.5.2 ESTADO
Muestra si el dispositivo se encuentra o no en estado de error.
• Información Avanzada: Muestra fecha, hora y el nombre del evento o del error presentado por el dispositivo. Verificar Tabla 6 y Tabla 7 para
obtener más información sobre los mismos